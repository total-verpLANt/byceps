{% extends 'layout/admin/base.html' %}
{% from 'macros/icons.html' import render_icon %}
{% set current_page = 'chair_optout_admin' %}
{% set current_page_party = party %}
{% set page_title = [_('Chair opt-out'), party.title] %}

{% block body %}

  <div class="block row row--space-between">
    <div>
      <h1 class="title">{{ _('Chair opt-out') }}</h1>
    </div>
    <div>
      <div class="button-row is-right-aligned">
        {%- if report_entries %}
        <a class="button" href="{{ url_for('.export_as_csv', party_id=party.id) }}" download="chair_optout_{{ party.id }}.csv">{{ render_icon('download') }} <span>{{ _('Export') }} (CSV)</span></a>
        {%- else %}
        <button class="button" disabled>{{ render_icon('download') }} <span>{{ _('Export') }} (CSV)</span></button>
        {%- endif %}
      </div>
    </div>
  </div>

  {%- if report_entries %}
  <table class="itemlist is-vcentered is-wide">
    <thead>
      <tr>
        <th>{{ _('Name') }}</th>
        <th>{{ _('Nickname') }}</th>
        <th>{{ _('Ticket number') }}</th>
        <th>{{ _('Seat') }}</th>
      </tr>
    </thead>
    <tbody>
      {%- for entry in report_entries %}
      <tr>
        <td>{{ entry.full_name or '' }}</td>
        <td>{{ entry.screen_name or '' }}</td>
        <td><span class="monospace">{{ entry.ticket_code }}</span></td>
        <td>
          {%- if entry.has_seat -%}
            {{ entry.seat_label|fallback(_('unnamed')) }}
          {%- else -%}
            {{ _('no seat')|dim }}
          {%- endif -%}
        </td>
      </tr>
      {%- endfor %}
    </tbody>
  </table>
  {%- else %}
  <div class="box no-data-message">{{ _('No entries') }}</div>
  {%- endif %}

{% endblock %}
